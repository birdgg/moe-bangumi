{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "if [ -n \"$CLAUDE_FILE_PATH\" ] && echo \"$CLAUDE_FILE_PATH\" | grep -qE '\\.hs$'; then cd /Users/birdgg/Projects/moe-bangumi && cabal build 2>&1 | tail -30; fi",
            "timeout": 120,
            "statusMessage": "Building Haskell..."
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "if [ -n \"$CLAUDE_FILE_PATH\" ] && echo \"$CLAUDE_FILE_PATH\" | grep -qE 'migrations/.*\\.sql$'; then echo 'MIGRATION EDIT: Review ALL queries in src/Moe/Infra/Database/ for column list consistency. Check JOIN queries in Tracking.hs, use bangumiColumnsAs for bangumi columns. Touch src/Moe/Infra/Database/Embedded.hs to trigger recompilation.' >&2; fi"
          }
        ]
      }
    ]
  },
  "permissions": {
    "allow": [
      "Bash(bun create:*)",
      "Bash(bunx:*)",
      "Bash(bun remove:*)",
      "WebFetch(domain:www.haskellforall.com)",
      "WebFetch(domain:wiki.haskell.org)",
      "mcp__acp__Bash",
      "mcp__plugin_context7_context7__resolve-library-id",
      "mcp__plugin_context7_context7__query-docs",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:www.parsonsmatt.org)",
      "Bash(cabal repl:*)",
      "Bash(cabal info:*)",
      "Bash(cabal freeze:*)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(cabal clean:*)",
      "Bash(gh repo view:*)",
      "Bash(gh api:*)",
      "Bash(git rm:*)",
      "Bash(ghci:*)",
      "Bash(ghc-pkg describe:*)",
      "Bash(cabal exec:*)",
      "Bash(cabal update:*)",
      "Bash(brew search:*)",
      "Bash(brew install:*)"
    ]
  }
}
